(this["webpackJsonpalexisruizdiaz-project"]=this["webpackJsonpalexisruizdiaz-project"]||[]).push([[0],{57:function(e,t,c){},59:function(e,t,c){"use strict";c.r(t);var n=c(3),s=c(37),r=c.n(s),i=c(6),a=c(38),j=c.n(a),l=c(9),d=c(10),o=c(41),b=c(2),u=Object(n.createContext)(),O=function(){return Object(n.useContext)(u)},x=function(e){var t=e.children,c=Object(n.useState)([]),s=Object(i.a)(c,2),r=s[0],a=s[1],j=Object(n.useState)(0),l=Object(i.a)(j,2),d=l[0],O=l[1],x=Object(n.useState)(0),h=Object(i.a)(x,2),m=h[0],p=h[1];return Object(b.jsx)(u.Provider,{value:{cartList:r,addToCartList:function(e){O(d+e.quantity*e.detail.price),p(m+e.quantity);var t=r.find((function(t){return t.detail.id===e.detail.id}));t?t.quantity+=e.quantity:a([].concat(Object(o.a)(r),[e]))},cartPriceTotal:d,cartQuantityItems:m,removeItemToCart:function(e){var t=r.find((function(t){return t.detail.id===e}));a(r.filter((function(t){return t.detail.id!==e}))),O(d-t.detail.price*t.quantity),p(m-t.quantity)},emptyCart:function(){a([]),O(0),p(0)}},children:t})},h=function(){var e=O().cartQuantityItems;return Object(b.jsx)("button",{className:"btn-tertiary",children:Object(b.jsxs)(l.Link,{to:"/cart",children:[Object(b.jsx)("box-icon",{name:"cart-alt",color:"#ffffff"}),0===e?"":Object(b.jsx)("span",{children:e})]})})},m=c(14),p=c(18),f=c(19),v=(c(31),f.a.initializeApp({apiKey:"AIzaSyCwIxzkEOS-IaDYvTl3mjJTdrKmUvdvSm0",authDomain:"reactapp-coderhouse-3e962.firebaseapp.com",projectId:"reactapp-coderhouse-3e962",storageBucket:"reactapp-coderhouse-3e962.appspot.com",messagingSenderId:"1047427626524",appId:"1:1047427626524:web:0d4ac2b59dbf30e96451d9",measurementId:"G-23K4992HK4"}));function y(){return f.a.firestore(v)}var g=y().collection("items"),N=y().collection("users"),k=y().collection("users").doc("KUdLRz46NhuYyOBiLp4R").collection("orders"),S=Object(n.createContext)(),C=function(){return Object(n.useContext)(S)},L=function(e){var t=e.children,c=Object(n.useState)({}),s=Object(i.a)(c,2),r=s[0],a=s[1],j=Object(n.useState)([]),l=Object(i.a)(j,2),d=l[0],o=l[1];return Object(p.useEffect)((function(){N.doc("KUdLRz46NhuYyOBiLp4R").get().then((function(e){return a(Object(m.a)({id:e.id},e.data()))})),N.doc("KUdLRz46NhuYyOBiLp4R").collection("orders").orderBy("date","asc").get().then((function(e){return o(e.docs.map((function(e){return Object(m.a)({id:e.id},e.data())})))})).catch((function(e){return console.log("error",e)}))}),[d]),Object(b.jsx)(S.Provider,{value:{user:r,historyOrders:d},children:t})},F=function(e){var t=e.scroll,c=C().user;return Object(p.useEffect)((function(){}),[]),Object(b.jsx)("header",{className:t?"scroll-active":"",children:Object(b.jsxs)("nav",{className:"navbar",children:[Object(b.jsx)("h1",{children:Object(b.jsxs)(l.Link,{to:"/",children:[Object(b.jsx)("span",{className:"textColor",children:"Game"}),"Shop"]})}),Object(b.jsxs)("ul",{className:"navbar-menu",children:[Object(b.jsx)("li",{children:Object(b.jsx)(l.Link,{to:"/",children:"Home"})}),Object(b.jsx)("li",{children:Object(b.jsx)(l.Link,{to:"/shop",children:"Shop"})}),Object(b.jsx)("li",{children:Object(b.jsx)(l.Link,{to:"/shop/category/ps2",children:"PS2"})}),Object(b.jsx)("li",{children:Object(b.jsx)(l.Link,{to:"/shop/category/ps3",children:"PS3"})}),Object(b.jsx)("li",{children:Object(b.jsx)(l.Link,{to:"/shop/category/xbox360",children:"XBOX 360"})})]}),Object(b.jsxs)("ul",{className:"navbar-user",children:[Object(b.jsx)("li",{children:Object(b.jsx)(h,{})}),Object(b.jsx)("li",{className:"user-profile",children:Object(b.jsx)(l.Link,{to:"/user",children:Object(b.jsx)("img",{src:c.imgProfile,alt:""})})})]})]})})},I=function(){return Object(b.jsxs)("div",{className:"loader",children:[Object(b.jsxs)("div",{className:"loader__spinner",children:[Object(b.jsx)("span",{}),Object(b.jsx)("span",{}),Object(b.jsx)("span",{})]}),Object(b.jsx)("p",{children:"Loading..."})]})},w=function(){var e=Object(n.useState)(!0),t=Object(i.a)(e,2),c=t[0],s=t[1],r=Object(n.useState)({}),a=Object(i.a)(r,2),j=a[0],d=a[1];return Object(n.useEffect)((function(){g.doc("c6LH39NO3W0O4leYdmhU").get().then((function(e){return d(Object(m.a)({id:e.id},e.data()))})).finally((function(){return s(!1)}))}),[]),Object(b.jsx)(b.Fragment,{children:c?Object(b.jsx)(I,{}):Object(b.jsxs)("div",{className:"banner",children:[Object(b.jsx)("img",{src:j.imgBanner,alt:""}),Object(b.jsxs)("div",{className:"banner-info",children:[Object(b.jsx)("h2",{className:"textColor",children:"Buy games easily and safely."}),Object(b.jsx)("button",{className:"btn-primary",children:Object(b.jsx)(l.Link,{to:"/shop",children:"See catalog"})})]})]})})},B=function(e){var t=e.items;return Object(b.jsx)("li",{className:"item",children:Object(b.jsxs)(l.Link,{to:"/shop/product/".concat(t.id),children:[Object(b.jsx)("div",{className:"item-img",children:Object(b.jsx)("img",{src:t.imgIcon,alt:t.name})}),Object(b.jsxs)("div",{className:"item-main",children:[Object(b.jsx)("h3",{children:t.name}),Object(b.jsxs)("h4",{children:[Object(b.jsx)("span",{children:"US$"}),t.price]}),Object(b.jsx)("h5",{children:t.type})]})]})})},D=function(e){var t=e.category,c=Object(n.useState)(!0),s=Object(i.a)(c,2),r=s[0],a=s[1],j=Object(n.useState)([]),d=Object(i.a)(j,2),o=d[0],u=d[1],O=Object(n.useRef)(null);Object(n.useEffect)((function(){g.where("category","==",t).limit(7).get().then((function(e){return u(e.docs.map((function(e){return Object(m.a)({id:e.id},e.data())})))})).finally((function(){return a(!1)}))}),[t]);return Object(b.jsx)(b.Fragment,{children:r?Object(b.jsx)(I,{}):Object(b.jsxs)("li",{className:"slide-category",children:[Object(b.jsxs)("div",{className:"slide-header",children:[Object(b.jsxs)("h3",{className:"textColor",children:[Object(b.jsx)("span",{children:t}),"Games"]}),Object(b.jsx)("button",{className:"btn-secondary",children:Object(b.jsx)(l.Link,{to:"/shop/category/".concat(t),className:"textColor",children:"See all"})})]}),Object(b.jsx)("ul",{className:"slide",ref:O,children:o.map((function(e){return Object(b.jsx)(B,{items:e},e.id)}))}),Object(b.jsx)("button",{onClick:function(e){e.preventDefault(),O.current.scrollLeft-=O.current.offsetWidth},className:"btn-tertiary slide-left",children:Object(b.jsx)("box-icon",{name:"chevron-left",color:"#ffffff"})}),Object(b.jsx)("button",{onClick:function(e){e.preventDefault(),O.current.scrollLeft+=O.current.offsetWidth},className:"btn-tertiary slide-right",children:Object(b.jsx)("box-icon",{name:"chevron-right",color:"#ffffff"})})]})})},P=function(){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(w,{}),Object(b.jsxs)("ul",{className:"slide-list",children:[Object(b.jsx)(D,{category:"ps2"}),Object(b.jsx)(D,{category:"ps3"}),Object(b.jsx)(D,{category:"xbox360"})]})]})},q=function(e){var t=e.item;return Object(b.jsx)("li",{className:"item",children:Object(b.jsxs)(l.Link,{to:"/shop/product/".concat(t.id),children:[Object(b.jsx)("div",{className:"item-img",children:Object(b.jsx)("img",{src:t.imgIcon,alt:t.name})}),Object(b.jsxs)("div",{className:"item-main",children:[Object(b.jsx)("h3",{children:t.name}),Object(b.jsxs)("h4",{children:[Object(b.jsx)("span",{children:"US$"}),t.price]}),Object(b.jsx)("h5",{children:t.type})]})]})})},Y=function(e){var t=e.items;return Object(b.jsx)("ul",{className:"shop-products",children:t.map((function(e){return Object(b.jsx)(q,{item:e},e.key)}))})},z=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),c=t[0],s=t[1],r=Object(n.useState)(!0),a=Object(i.a)(r,2),j=a[0],l=a[1],o=Object(d.m)().idCategory;return Object(n.useEffect)((function(){(o?g.where("category","==",o).get():g.get()).then((function(e){return s(e.docs.map((function(e){return Object(m.a)({id:e.id},e.data())})))})).finally((function(){l(!1)}))}),[o]),Object(b.jsx)("section",{children:j?Object(b.jsx)(I,{}):Object(b.jsx)(Y,{items:c})})},E=c(26),T=c.n(E),U=function(e){var t=e.stock,c=e.initial,s=e.onAdd,r=Object(n.useState)(c),a=Object(i.a)(r,2),j=a[0],d=a[1],o=Object(n.useState)("add"),u=Object(i.a)(o,2),O=u[0],x=u[1],h=function(){return Object(b.jsxs)("div",{className:"item-count",children:[Object(b.jsxs)("div",{className:"counter",children:[Object(b.jsx)("button",{onClick:f,children:Object(b.jsx)("span",{className:"textColor",children:"-"})}),Object(b.jsx)("span",{className:"textColor",children:j}),Object(b.jsx)("button",{onClick:p,children:Object(b.jsx)("span",{className:"textColor",children:"+"})})]}),Object(b.jsx)("button",{className:"btn-primary",onClick:v,children:Object(b.jsx)("span",{children:"Add to Cart"})})]})},m=function(){return Object(b.jsx)("button",{className:"btn-primary",children:Object(b.jsx)(l.Link,{to:"/cart",children:"Show Cart"})})},p=function(){return j<t?d(j+1):T()({text:"You reached the maximum stock",icon:"warning"})},f=function(){return j>c?d(j-1):T()({text:"Can not be removed anymore",icon:"warning"})},v=function(){x("show"),s(j)};return Object(b.jsx)(b.Fragment,{children:"add"===O?Object(b.jsx)(h,{}):Object(b.jsx)(m,{})})},R=function(e){var t=e.detail,c=Object(p.useState)(1),n=Object(i.a)(c,2),s=n[0],r=n[1],a=O().addToCartList;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"detail-bg",children:Object(b.jsx)("img",{src:t.imgBanner,alt:""})}),Object(b.jsx)("section",{children:Object(b.jsxs)("div",{className:"item-detail",children:[Object(b.jsx)(l.Link,{to:"/shop",children:Object(b.jsx)("box-icon",{name:"left-arrow-alt"})}),Object(b.jsxs)("div",{className:"detail-body",children:[Object(b.jsxs)("div",{className:"detail-header",children:[Object(b.jsx)("h2",{children:t.name}),Object(b.jsxs)("p",{children:[Object(b.jsx)("span",{children:t.category}),Object(b.jsx)("span",{children:t.type})]})]}),Object(b.jsxs)("div",{className:"detail-main",children:[Object(b.jsx)("iframe",{width:"560",height:"315",src:t.video,title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0}),Object(b.jsxs)("div",{className:"detail-description",children:[Object(b.jsxs)("div",{className:"detail-product",children:[Object(b.jsxs)("div",{className:"product-price",children:[Object(b.jsxs)("h3",{className:"textColor",children:[Object(b.jsx)("span",{children:"US$"}),t.price]}),t.stock>=1?Object(b.jsx)(U,{product:t,stock:t.stock,initial:s,onAdd:function(e){r(e),a({detail:t,quantity:e})}}):Object(b.jsx)("p",{children:"No stock available"})]}),Object(b.jsx)("img",{src:t.imgIcon,alt:""})]}),Object(b.jsx)("p",{children:t.description})]})]})]})]})})]})},A=function(){var e=Object(n.useState)({}),t=Object(i.a)(e,2),c=t[0],s=t[1],r=Object(n.useState)(!0),a=Object(i.a)(r,2),j=a[0],l=a[1],o=Object(d.m)().idProduct;return Object(n.useEffect)((function(){g.doc(o).get().then((function(e){return s(Object(m.a)({id:e.id},e.data()))})).finally((function(){return l(!1)}))}),[o]),Object(b.jsx)(b.Fragment,{children:j?Object(b.jsx)(I,{}):Object(b.jsx)(R,{detail:c})})},K=function(e){e.order;return Object(b.jsx)("li",{})},$=function(e){var t=e.orders;return Object(b.jsx)("ul",{children:t.map((function(e){return Object(b.jsx)(K,{order:e},e.id)}))})},H=function(){var e=C(),t=e.user,c=e.historyOrders;return Object(b.jsx)("section",{children:Object(b.jsxs)("div",{className:"user-container",children:[Object(b.jsxs)("div",{className:"user",children:[Object(b.jsx)("div",{className:"user-img",children:Object(b.jsx)("img",{src:t.imgProfile,alt:""})}),Object(b.jsx)("p",{children:t.name})]}),Object(b.jsx)("div",{className:"user-data",children:Object(b.jsxs)("div",{className:"user-orders",children:[Object(b.jsx)("h3",{children:"My History Orders"}),Object(b.jsxs)("p",{children:[c.length," purchases"]}),Object(b.jsx)($,{orders:c})]})})]})})},Q=c(23),G=function(e){var t=e.formData,c=e.getFormData,n=e.generateOrder,s=O().emptyCart;return Object(b.jsxs)("form",{onSubmit:n,onChange:c,className:"cartlist-form",children:[Object(b.jsx)("legend",{className:"textColor",children:"Enter your personal data"}),Object(b.jsxs)("div",{className:"form-input",children:[Object(b.jsx)("label",{htmlFor:"name",children:"Full name:"}),Object(b.jsx)("span",{children:Object(b.jsx)("input",{type:"text",name:"name",value:t.name,placeholder:"Your full name",required:!0})})]}),Object(b.jsxs)("div",{className:"form-input",children:[Object(b.jsx)("label",{htmlFor:"phone",children:"Phone number:"}),Object(b.jsx)("span",{children:Object(b.jsx)("input",{type:"text",name:"phone",value:t.phone,placeholder:"Your email address",required:!0})})]}),Object(b.jsxs)("div",{className:"form-input",children:[Object(b.jsx)("label",{htmlFor:"email",children:"Email address:"}),Object(b.jsx)("span",{children:Object(b.jsx)("input",{type:"text",name:"email",value:t.email,placeholder:"Your phone number",required:!0})})]}),Object(b.jsxs)("div",{className:"form-input",children:[Object(b.jsx)("label",{htmlFor:"location",children:"Location:"}),Object(b.jsx)("span",{children:Object(b.jsx)("input",{type:"text",name:"location",value:t.location,placeholder:"Your location",required:!0})})]}),Object(b.jsxs)("div",{className:"form-submit",children:[Object(b.jsx)("button",{className:"btn-secondary",onClick:function(){return s()},children:"Delete cart"}),Object(b.jsx)("button",{className:"btn-primary",type:"submit",children:Object(b.jsx)("span",{children:"Finalize purchase"})})]})]})},J=function(e){var t=e.item,c=O().removeItemToCart;return Object(b.jsxs)("li",{className:"cartlist-item",children:[Object(b.jsx)("img",{src:t.detail.imgIcon,alt:t.detail.name}),Object(b.jsxs)("div",{className:"item-data",children:[Object(b.jsx)("h3",{children:t.detail.name}),Object(b.jsxs)("h4",{children:["US$",t.detail.price," ",Object(b.jsxs)("span",{children:["x ",t.quantity]})]})]}),Object(b.jsx)("button",{onClick:function(){return c(t.detail.id)},className:"btn-tertiary",children:Object(b.jsx)("box-icon",{name:"trash-alt",color:"#ffffff"})})]})},W=function(){var e=O(),t=e.cartPriceTotal,c=e.cartQuantityItems;return Object(b.jsxs)("div",{className:"cartlist-total",children:[Object(b.jsxs)("p",{children:["Items: ",Object(b.jsxs)("span",{className:"textColor",children:[Object(b.jsxs)("i",{children:["x",c]}),"US$",t]})]}),Object(b.jsxs)("p",{children:["Delivery: ",Object(b.jsx)("span",{className:"textColor",children:"US$4.99"})]}),Object(b.jsxs)("p",{children:["Order total: ",Object(b.jsxs)("span",{className:"textColor",children:["US$",(t+4.99).toFixed(2)]})]})]})},X=function(){var e=O(),t=e.cartList,c=e.cartPriceTotal,n=e.cartQuantityItems,s=e.emptyCart,r=Object(p.useState)({name:"",phone:"",email:"",location:""}),a=Object(i.a)(r,2),j=a[0],d=a[1];return Object(b.jsx)("section",{children:Object(b.jsxs)("div",{className:"cartlist",children:[Object(b.jsx)("h2",{className:"textColor",children:"Shopping cart"}),0===n?Object(b.jsxs)("div",{className:"cartlist-empty",children:[Object(b.jsx)("p",{children:"Your cart is empty"}),Object(b.jsx)("button",{className:"btn-primary",children:Object(b.jsx)(l.Link,{to:"/shop",children:"Return to the shop"})})]}):Object(b.jsxs)("div",{className:"cartlist-container",children:[Object(b.jsx)(G,{formData:j,getFormData:function(e){d(Object(m.a)(Object(m.a)({},j),{},Object(Q.a)({},e.target.name,e.target.value)))},generateOrder:function(e){e.preventDefault();var n={};n.date=f.a.firestore.Timestamp.fromDate(new Date),n.buyer=j,n.total=(c+4.99).toFixed(2),n.items=t.map((function(e){return{id:e.detail.id,name:e.detail.name,quantity:e.quantity,price:e.detail.price*e.quantity}})),k.add(n).then((function(e){return T()({title:"Your purchase was successful!",text:"Purchase order: ".concat(e.id),icon:"success"})})).finally((function(){s()}));var r=g.where(f.a.firestore.FieldPath.documentId(),"in",t.map((function(e){return e.detail.id}))),i=y().batch();r.get().then((function(e){e.docs.forEach((function(e){i.update(e.ref,{stock:e.data().stock-t.find((function(t){return t.detail.id===e.id})).quantity})})),i.commit()}))}}),Object(b.jsxs)("div",{className:"cartlist-order",children:[Object(b.jsx)("ul",{className:"cartlist-items",children:t.map((function(e){return Object(b.jsx)(J,{item:e})}))}),Object(b.jsx)(W,{})]})]})]})})},_=function(){return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("p",{children:["Built by ",Object(b.jsx)("a",{href:"https://github.com/alexis00rod",children:"Alexis Ruiz Diaz"})]})})},M=function(){var e=Object(p.useState)({}),t=Object(i.a)(e,2),c=t[0],n=t[1];return Object(b.jsx)("section",{children:Object(b.jsxs)("form",{onChange:function(e){n(Object(m.a)(Object(m.a)({},c),{},Object(Q.a)({date:f.a.firestore.Timestamp.fromDate(new Date)},e.target.name,e.target.value)))},onSubmit:function(e){e.preventDefault(),g.add(c),console.log("Product add!")},children:[Object(b.jsx)("legend",{children:"Add Product"}),Object(b.jsxs)("div",{className:"add-input",children:[Object(b.jsx)("label",{htmlFor:"name",children:"name"}),Object(b.jsx)("input",{type:"text",name:"name",id:"name",value:c.name})]}),Object(b.jsxs)("div",{className:"add-input",children:[Object(b.jsx)("label",{htmlFor:"category",children:"category"}),Object(b.jsx)("input",{type:"text",name:"category",id:"category",value:c.category})]}),Object(b.jsxs)("div",{className:"add-input",children:[Object(b.jsx)("label",{htmlFor:"imgIcon",children:"imgIcon"}),Object(b.jsx)("input",{type:"text",name:"imgIcon",id:"imgIcon",value:c.imgIcon})]}),Object(b.jsxs)("div",{className:"add-input",children:[Object(b.jsx)("label",{htmlFor:"price",children:"price"}),Object(b.jsx)("input",{type:"text",name:"price",id:"price",value:c.price})]}),Object(b.jsxs)("div",{className:"add-input",children:[Object(b.jsx)("label",{htmlFor:"type",children:"type"}),Object(b.jsx)("input",{type:"text",name:"type",id:"type",value:c.type})]}),Object(b.jsxs)("div",{className:"add-input",children:[Object(b.jsx)("label",{htmlFor:"video",children:"video"}),Object(b.jsx)("input",{type:"text",name:"video",id:"video",value:c.video})]}),Object(b.jsxs)("div",{className:"add-input",children:[Object(b.jsx)("label",{htmlFor:"imgBanner",children:"imgBanner"}),Object(b.jsx)("input",{type:"text",name:"imgBanner",id:"imgBanner",value:c.imgBanner})]}),Object(b.jsxs)("div",{className:"add-input",children:[Object(b.jsx)("label",{htmlFor:"stock",children:"stock"}),Object(b.jsx)("input",{type:"text",name:"stock",id:"stock",value:c.stock})]}),Object(b.jsxs)("div",{className:"add-input",children:[Object(b.jsx)("label",{htmlFor:"description",children:"description"}),Object(b.jsx)("input",{type:"text",name:"description",id:"description",value:c.description})]}),Object(b.jsx)("button",{type:"submit",children:"Add product"})]})})};c(57),c(58);var V=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),c=t[0],s=t[1];return window.addEventListener("scroll",(function(){window.scrollY>=80?s(!0):s(!1)})),Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(L,{children:Object(b.jsx)(x,{children:Object(b.jsxs)(l.BrowserRouter,{children:[Object(b.jsx)(F,{scroll:c}),Object(b.jsx)(j.a,{}),Object(b.jsxs)(d.g,{children:[Object(b.jsx)(d.d,{exact:!0,path:"/",component:P}),Object(b.jsx)(d.d,{exact:!0,path:"/shop",component:z}),Object(b.jsx)(d.d,{exact:!0,path:"/shop/category/:idCategory",component:z}),Object(b.jsx)(d.d,{exact:!0,path:"/shop/product/:idProduct",component:A}),Object(b.jsx)(d.d,{exact:!0,path:"/addProduct",component:M}),Object(b.jsx)(d.d,{exact:!0,path:"/cart",component:X}),Object(b.jsx)(d.d,{exact:!0,path:"/user",component:H})]}),Object(b.jsx)("footer",{children:Object(b.jsx)(_,{})})]})})})})};r.a.render(Object(b.jsx)(V,{}),document.getElementById("root"))}},[[59,1,2]]]);
//# sourceMappingURL=main.43acb684.chunk.js.map